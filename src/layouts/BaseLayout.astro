---
import CookieBanner from '@/components/CookieBanner.astro';

interface Props {
  title: string;
  description?: string;
  image?: string;
  article?: boolean;
  publishedTime?: string;
  modifiedTime?: string;
  canonicalUrl?: string;
}

const {
  title,
  description = 'Copywriting BLOG — Poradnik copywritera. Praktyczna wiedza o copywritingu, narzędziach i tworzeniu treści.',
  image = '/images/og-default.jpg',
  article = false,
  publishedTime,
  modifiedTime,
  canonicalUrl,
} = Astro.props;

const siteTitle = 'Copywriting BLOG';
const fullTitle = title === siteTitle ? title : `${title} — ${siteTitle}`;
const canonical = canonicalUrl || Astro.url.href;
const ogImage = Astro.site ? new URL(image, Astro.site).href : image;

import '../styles/global.css';
---

<!doctype html>
<html lang="pl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />

  <!-- Primary Meta -->
  <title>{fullTitle}</title>
  <meta name="description" content={description} />
  <meta name="author" content="Karol Leszczyński" />
  <link rel="canonical" href={canonical} />

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
  <link rel="apple-touch-icon" href="/apple-touch-icon.png" />

  <!-- Open Graph -->
  <meta property="og:title" content={fullTitle} />
  <meta property="og:description" content={description} />
  <meta property="og:image" content={ogImage} />
  <meta property="og:url" content={canonical} />
  <meta property="og:site_name" content={siteTitle} />
  <meta property="og:locale" content="pl_PL" />
  <meta property="og:type" content={article ? 'article' : 'website'} />
  {publishedTime && <meta property="article:published_time" content={publishedTime} />}
  {modifiedTime && <meta property="article:modified_time" content={modifiedTime} />}

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image" />
  <meta name="twitter:title" content={fullTitle} />
  <meta name="twitter:description" content={description} />
  <meta name="twitter:image" content={ogImage} />

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title={siteTitle} href="/rss.xml" />

  <!-- Preconnect -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

  <!-- JSON-LD -->
  <script type="application/ld+json" set:html={JSON.stringify({
    "@context": "https://schema.org",
    "@type": "WebSite",
    "name": siteTitle,
    "url": Astro.site?.href || "https://www.copywriting-blog.pl/",
    "description": description,
    "author": {
      "@type": "Person",
      "name": "Karol Leszczyński"
    },
    "potentialAction": {
      "@type": "SearchAction",
      "target": `${Astro.site?.href || "https://www.copywriting-blog.pl/"}blog/?q={search_term_string}`,
      "query-input": "required name=search_term_string"
    }
  })} />
</head>
<body>
  <header class="site-header" id="site-header">
    <div class="header-inner">
      <a href="/" class="site-logo">
        Copywriting<span>BLOG</span>
      </a>

      <button class="menu-toggle" aria-label="Menu" aria-expanded="false" id="menu-toggle">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="3" y1="6" x2="21" y2="6" />
          <line x1="3" y1="12" x2="21" y2="12" />
          <line x1="3" y1="18" x2="21" y2="18" />
        </svg>
      </button>

      <nav>
        <ul class="nav-links" id="nav-links">
          <li><a href="/">Start</a></li>
          <li><a href="/blog/">Blog</a></li>
          <li><a href="/o-mnie/">O mnie</a></li>
          <li><a href="/wspolpraca/">Współpraca</a></li>
          <li><a href="/kontakt/">Kontakt</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main>
    <slot />
  </main>

  <footer class="site-footer">
    <div class="footer-inner">
      <div class="footer-brand">
        <a href="/" class="site-logo">
          Copywriting<span>BLOG</span>
        </a>
        <p>Praktyczna wiedza o copywritingu, narzędziach i tworzeniu treści. Blog prowadzony przez copywritera, redaktora i twórcę treści.</p>
      </div>

      <div>
        <h3 class="footer-heading">Nawigacja</h3>
        <ul class="footer-links">
          <li><a href="/">Strona główna</a></li>
          <li><a href="/blog/">Wszystkie wpisy</a></li>
          <li><a href="/o-mnie/">O mnie</a></li>
          <li><a href="/wspolpraca/">Współpraca</a></li>
          <li><a href="/kontakt/">Kontakt</a></li>
        </ul>
      </div>

      <div>
        <h3 class="footer-heading">Więcej</h3>
        <ul class="footer-links">
          <li><a href="#" onclick="openCookieSettings(); return false;">Ustawienia cookies</a></li>
          <li><a href="/sitemap-index.xml">Polityka prywatności</a></li>
        </ul>
      </div>
    </div>

    <div class="footer-bottom">
      <p>&copy; {new Date().getFullYear()} Copywriting BLOG. Wszelkie prawa zastrzeżone.</p>
      <p>Karol Leszczyński</p>
    </div>
  </footer>
<CookieBanner />
  <script>
    const toggle = document.getElementById('menu-toggle');
    const nav = document.getElementById('nav-links');
    toggle?.addEventListener('click', () => {
      const expanded = toggle.getAttribute('aria-expanded') === 'true';
      toggle.setAttribute('aria-expanded', String(!expanded));
      nav?.classList.toggle('open');
    });

    const header = document.getElementById('site-header');
    window.addEventListener('scroll', () => {
      header?.classList.toggle('scrolled', window.scrollY > 10);
    }, { passive: true });
  </script>
</body>
</html>